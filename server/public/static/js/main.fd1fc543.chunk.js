(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1013:function(t,e,n){},1015:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"changeTaskListData",function(){return F}),n.d(a,"changeUserList",function(){return U}),n.d(a,"getDepartmentList",function(){return J}),n.d(a,"getProjectList",function(){return z}),n.d(a,"getAuthorityList",function(){return Y}),n.d(a,"getRanksList",function(){return G});var r={};n.r(r),n.d(r,"changeStatMode",function(){return tt}),n.d(r,"changeAuditTimeRange",function(){return et});var i={};n.r(i),n.d(i,"changeUserPk",function(){return at}),n.d(i,"changeTaskList",function(){return rt}),n.d(i,"changeOnTimeTaskList",function(){return it});var s=n(0),o=n.n(s),c=n(9),l=n.n(c),u=n(25),m=n(26),p=n(29),d=n(27),h=n(28),f=n(67),k=n(98),g=n(75),v=n(33),b=n(140),A=n(415),E=n(416),y=n(36),_=Object(y.fromJS)({taskListData:[],userList:[],departmentList:[],projectList:[],authorityList:[],ranksList:[]}),j=n(275),T=n.n(j),O=n(417),L=n.n(O),x="http://127.0.0.1:8891/",S=T.a.create({baseURL:"/",timeout:3e4});function w(t,e){return new Promise(function(n,a){S.post(t,e).then(function(t){n(t)},function(t){a(t)}).catch(function(t){a(t)})})}S.interceptors.request.use(function(t){return"post"===t.method&&(t.data=L.a.stringify(t.data)),t},function(t){return console.log("\u9519\u8bef\u7684\u4f20\u53c2","fail"),Promise.reject(t)}),S.interceptors.response.use(function(t){return t.data?t:Promise.reject(t)},function(t){return console.log("\u7f51\u7edc\u5f02\u5e38","fail"),Promise.reject(t)});var C={getLogin:function(t){return w("/jasonWorkStat/user/login",t)},getTaskList:function(t){return w("/jasonWorkStat/task/taskList",t)},getUserLIst:function(t){return w("/jasonWorkStat/user/userList",t)},getDepartmentList:function(t){return w("/jasonWorkStat/task/departmentList",t)},getProjectList:function(t){return w("/jasonWorkStat/project/projectList",t)},getAddTaskItem:function(t){return w("/jasonWorkStat/task/addTaskItem",t)},getUpdateTaskItem:function(t){return w("/jasonWorkStat/task/updateTaskItem",t)},getRemoveTaskItem:function(t){return w("/jasonWorkStat/task/removeTaskItem",t)},getAddProject:function(t){return w("/jasonWorkStat/project/addProject",t)},getUpdateProject:function(t){return w("/jasonWorkStat/project/updateProject",t)},getTaskExportXlsx:function(t){return w("/jasonWorkStat/tools/exportTaskXlsx",t)},getAuthorityList:function(t){return w("/jasonWorkStat/task/authorityList",t)},getRanksList:function(t){return w("/jasonWorkStat/task/ranksList",t)},getAddUser:function(t){return w("/jasonWorkStat/user/addUser",t)},getRemoveUser:function(t){return w("/jasonWorkStat/user/removeUser",t)}},I=function(t){return JSON.parse(JSON.stringify(t))},D=function(t,e,n){return t.forEach(function(t){t[e]=t[n]}),t},P=function(t,e,n){var a=null,r=!0,i=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var l=o.value;if(l[e]==n){a=l;break}}}catch(u){i=!0,s=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}return a},M=function(t,e){var n=[];return t.forEach(function(t){n.push(t[e])}),n},N=function(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value,l={name:c.name,value:0},u=!0,m=!1,p=void 0;try{for(var d,h=t[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=d.value;c.status==f.is_finish&&(l.value+=1)}}catch(k){m=!0,p=k}finally{try{u||null==h.return||h.return()}finally{if(m)throw p}}n.push(l)}}catch(k){r=!0,i=k}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n},R=function(t){var e={};return t.forEach(function(t){t.value>0?e[t.name]=!0:e[t.name]=!1}),e},F=function(){return function(t){C.getTaskList().then(function(e){if(console.log("\u83b7\u53d6\u4efb\u52a1\u5217\u8868"),console.log(e),0==e.data.code){var n=e.data.data;D(n,"key","pk"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"num";t.forEach(function(t,n){t[e]=n+1})}(n),t(function(t){return{type:"home/CHANGE_TASK_LIST_DATA",taskListData:t}}(n))}}).catch(function(t){console.log(t)})}},U=function(){return function(t){C.getUserLIst().then(function(e){if(console.log("\u83b7\u53d6\u7528\u6237\u5217\u8868"),console.log(e),0==e.data.code){var n=e.data.data;D(n,"key","pk"),t(function(t){return{type:"home/CHANGE_USER_LIST_DATA",userList:t}}(n))}}).catch(function(t){console.log(t)})}},J=function(){return function(t){C.getDepartmentList().then(function(e){if(console.log("\u83b7\u53d6\u79d1\u5ba4\u5217\u8868"),console.log(e),0==e.data.code){var n=e.data.data;t(function(t){return{type:"home/GET_DEPARTMENT_LIST_DATA",departmentList:t}}(n))}}).catch(function(t){console.log(t)})}},z=function(){return function(t){C.getProjectList().then(function(e){if(console.log("\u83b7\u53d6\u9879\u76ee\u5217\u8868"),console.log(e),0==e.data.code){var n=e.data.data;D(n,"key","pk"),t(function(t){return{type:"home/GET_PROJECT_LIST_DATA",projectList:t}}(n))}})}},Y=function(){return function(t){C.getAuthorityList().then(function(e){if(console.log("\u83b7\u53d6\u6743\u9650\u5217\u8868"),console.log(e),0==e.data.code){var n=e.data.data;D(n,"key","pk"),t(function(t){return{type:"home/GET_AUTHORITY_LIST_DATA",authorityList:t}}(n))}})}},G=function(){return function(t){C.getRanksList().then(function(e){if(console.log("\u83b7\u53d6\u804c\u4f4d\u5217\u8868"),console.log(e),0==e.data.code){var n=e.data.data;D(n,"key","pk"),t(function(t){return{type:"home/GET_RANKS_LIST_DATA",ranksList:t}}(n))}})}},W=n(120),B=n.n(W),H=B.a.get("react-wrok-state-userinfo")||{},V=Object(y.fromJS)({userInfo:H}),q=(n(167),Object(y.fromJS)({})),Q=(n(168),Object(y.fromJS)({})),X=n(12),K=n.n(X),Z=[K()().startOf("year"),K()()],$=Object(y.fromJS)({statModeData:[{name:"\u4e2a\u4eba\u5de5\u4f5c\u91cf",value:1},{name:"ceshi",value:2}],statMode:1,auditTimeRange:Z}),tt=function(t){return function(e){e({type:"stat/CHANGE_STAT_MODE",value:t})}},et=function(t){return function(e){e({type:"stat/CHANGE_AUDIT_TIME_RANGE",value:t})}},nt=Object(y.fromJS)({userPk:"",statCircleData:{},onTimeTaskData:{}}),at=function(t){return function(e){e({type:"statPersonWorkCom/CHANGE_USER_PK",value:t})}},rt=function(t){return function(e){e({type:"statPersonWorkCom/CHANGE_TASK_LIST",data:t})}},it=function(t){return function(e){e({type:"statPersonWorkCom/CHANGE_ONTIME_TASK_LIST",data:t})}},st=Object(E.combineReducers)({home:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"home/CHANGE_TASK_LIST_DATA":return t.set("taskListData",Object(y.List)(e.taskListData));case"home/CHANGE_USER_LIST_DATA":return t.set("userList",Object(y.List)(e.userList));case"home/GET_DEPARTMENT_LIST_DATA":return t.set("departmentList",Object(y.List)(e.departmentList));case"home/GET_PROJECT_LIST_DATA":return t.set("projectList",Object(y.List)(e.projectList));case"home/GET_AUTHORITY_LIST_DATA":return t.set("authorityList",Object(y.List)(e.authorityList));case"home/GET_RANKS_LIST_DATA":return t.set("ranksList",Object(y.List)(e.ranksList));default:return t}},login:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/USER_INFO":return B.a.set("react-wrok-state-userinfo",e.userInfo),t.set("userInfo",e.userInfo);default:return t}},project:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return(arguments.length>1?arguments[1]:void 0).type,t},userPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;return(arguments.length>1?arguments[1]:void 0).type,t},statPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"stat/CHANGE_STAT_MODE":return t.set("statMode",e.value);case"stat/CHANGE_AUDIT_TIME_RANGE":return t.set("auditTimeRange",Object(y.List)(e.value));default:return t}},statPersonWorkCom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"statPersonWorkCom/CHANGE_USER_PK":return t.set("userPk",e.value);case"statPersonWorkCom/CHANGE_TASK_LIST":return t.set("statCircleData",Object(y.fromJS)(e.data));case"statPersonWorkCom/CHANGE_ONTIME_TASK_LIST":return t.set("onTimeTaskData",Object(y.fromJS)(e.data));default:return t}}}),ot=Object(b.d)(st,Object(b.c)(Object(b.a)(A.a))),ct=n(20),lt=n(21);function ut(){var t=Object(ct.a)(["\n\t\n\twidth:100%;\t\n"]);return ut=function(){return t},t}function mt(){var t=Object(ct.a)(["\n\t\n\twidth:100%;\n\t.logo-wrapper{\n\t\twidth:100%;\n\t\theight:60px;\n\t\ttext-align:center;\n\t\tline-height:60px;\n\t\tcolor:#fff;\n\t\tfont-size:18px;\n\t\tfont-weight:bold;\n\t}\n\n\t.list{\n\n\t\tpadding-top:20px;\n\n\t\t.list-item{\n\n\t\t\tdisplay:block;\n\n\t\t\tspan{\n\t\t\t\tdisplay:block;\n\t\t\t\ttext-align:center;\n\t\t\t\tpadding:8px 0;\n\t\t\t\tfont-size:14px;\n\t\t\t\tcolor:#fff;\n\t\t\t\tcursor:pointer;\n\t\t\t}\n\t\t}\n\n\t\t.selected{\n\t\t\tbackground-color:#1890ff;\n\t\t}\n\t}\n\n"]);return mt=function(){return t},t}function pt(){var t=Object(ct.a)(["\n\theight:100%;\n\tposition:relative;\n\tpadding-top:60px;\n\tbox-sizing:border-box;\n\toverflow:hidden;\n\n\t\n\t.router-wrapper-route{\n\t\theight:100%;\n\t\tposition:relative;\n\t}\n\n"]);return pt=function(){return t},t}function dt(){var t=Object(ct.a)(["\n\n\twidth:160px;\n\theight:100%;\n\tbackground-color:#333;\n\tfloat:left;\n\n\n"]);return dt=function(){return t},t}function ht(){var t=Object(ct.a)(["\n\t\n\twidth:100%;\n\theight:60px;\n\tposition:absolute;\n\tleft:0;\n\ttop:0;\n\tbackground-color:#333;\n\n\t.wr-box{\n\t\theight:100%;\n\t\tline-height:60px;\n\n\t\t.rig-wr{\n\t\t\tpadding-right:18px;\n\t\t\tcolor:#fff;\n\t\t\tline-height:60px;\n\t\t\tcolor:#fff;\n\t\t\tfont-size:13px;\n\n\t\t\t.username{\n\t\t\t\tfont-size:14px;\n\t\t\t}\n\t\t}\n\t}\n\n"]);return ht=function(){return t},t}function ft(){var t=Object(ct.a)(["\n\t\n\twidth:100%;\n\theight:100%;\n\toverflow:hidden;\n\t//background-color:red;\n\n\t.bot-info-wrapper{\n\n\t\tposition:relative;\n\t\theight:100%;\n\t\tbox-sizing:border-box;\n\t\toverflow:hidden;\n\t\tmargin-left:160px;\n\n\t}\n"]);return ft=function(){return t},t}var kt=lt.b.div(ft()),gt=lt.b.div(ht()),vt=lt.b.div(dt()),bt=lt.b.div(pt()),At=lt.b.div(mt()),Et=lt.b.div(ut()),yt=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props.userInfo.toJS();return o.a.createElement(gt,null,o.a.createElement("div",{className:"wr-box clearfix"},o.a.createElement("div",{className:"rig-wr fr"},o.a.createElement("span",{className:"username"},t.username))))}}]),e}(s.PureComponent),_t=Object(v.b)(function(t){return{userInfo:t.getIn(["login","userInfo"])}},null)(yt),jt=n(58),Tt=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).toMyTaskListPage=function(){n.props.history.push("/home/myTaskList")},n.toReleaseTaskListPage=function(){n.props.history.push("/home/myReleaseTaskList")},n.toTaskListPage=n.toTaskListPage.bind(Object(jt.a)(n)),n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"toTaskListPage",value:function(){this.props.history.push("/home/taskList")}},{key:"render",value:function(){var t=this.props.userInfo;return t=t.toJS(),o.a.createElement(vt,null,o.a.createElement(At,null,o.a.createElement("div",{className:"logo-wrapper"},"logo"),o.a.createElement("ul",{className:"list"},o.a.createElement(f.NavLink,{className:"list-item",to:"/home/taskList",activeClassName:"selected"},o.a.createElement("span",null,"\u4efb\u52a1\u5217\u8868")),o.a.createElement(f.NavLink,{className:"list-item",to:"/home/myTaskList",activeClassName:"selected"},o.a.createElement("span",null,"\u6211\u7684\u4efb\u52a1")),3!=t.auth_pk?o.a.createElement(s.Fragment,null,o.a.createElement(f.NavLink,{className:"list-item",to:"/home/myReleaseTaskList",activeClassName:"selected"},o.a.createElement("span",null,"\u6211\u7684\u53d1\u5e03")),o.a.createElement(f.NavLink,{className:"list-item",to:"/home/projectPage",activeClassName:"selected"},o.a.createElement("span",null,"\u9879\u76ee\u7ba1\u7406")),o.a.createElement(f.NavLink,{className:"list-item",to:"/home/userManPage",activeClassName:"selected"},o.a.createElement("span",null,"\u7528\u6237\u7ba1\u7406"))):"",o.a.createElement(f.NavLink,{className:"list-item",to:"/home/statisticsPage",activeClassName:"selected"},o.a.createElement("span",null,"\u4efb\u52a1\u7edf\u8ba1")))),o.a.createElement(Et,null))}}]),e}(s.PureComponent),Ot=Object(v.b)(function(t){return{userInfo:t.getIn(["login","userInfo"])}},null)(Tt);function Lt(){var t=Object(ct.a)(["\n\theight:100%;\n\tposition:relative;\n\n"]);return Lt=function(){return t},t}var xt=lt.b.div(Lt()),St=n(89),wt=n(1017);function Ct(){var t=Object(ct.a)(["\n\t\n\theight:24px;\n\tline-height:24px;\n\tbackground-color:#ccc;\n\tposition:absolute;\n\tleft:0;\n\ttop:10px;\n\twidth:100%;\n\tz-index:10;\n\n\t.notic-item{\n\t\tpadding:0 10px;\n\t}\n\n"]);return Ct=function(){return t},t}function It(){var t=Object(ct.a)(["\n\tposition:relative;\n\theight:90%;\n\tpadding-top:64px;\n\tbox-sizing:border-box;\n\t\n\n\t&.act{\n\t\tpadding-top:88px;\n\t}\n\n\t.main-content-wrapper{\n\t\tposition:relative;\n\t\theight:100%;\n\t\toverflow-y:auto;\n\t}\n"]);return It=function(){return t},t}function Dt(){var t=Object(ct.a)(["\n\t\n\tposition:absolute;\n\tleft:0;\n\ttop:34px;\n\twidth:100%;\n\tz-index:10;\n\tbackground-color:#fff;\n\n\t.header-item{\n\t\tpadding-bottom:8px;\n\t}\n\n\t.btns-wrapper{\n\t\theight:100%;\n\t\tdisplay:flex;\n\t\talign-items: center;\n\t\tpadding-left:20px;\n\n\t\t.btns-item{\n\t\t\tmargin-right:14px;\n\t\t}\n\t}\n\n\t.filter-search-wr{\n\t\theight:100%;\n\t\tdisplay:flex;\n\t\talign-items: center;\n\t\tpadding-left:20px;\n\n\t\t.search-item{\n\t\t\tmargin-right:14px;\n\t\t}\n\t}\n\n\n\n\t.btns-right{\n\t\theight:100%;\n\t\tdisplay:flex;\n\t\talign-items: center;\n\t\tpadding-right:20px;\n\n\t\t.btn-item{\n\t\t\tmargin-right:6px;\n\t\t}\n\t}\n"]);return Dt=function(){return t},t}function Pt(){var t=Object(ct.a)(["\n\theight:100%;\n\tposition:relative;\n\tmin-width:1300px;\n\n"]);return Pt=function(){return t},t}var Mt=lt.b.div(Pt()),Nt=lt.b.div(Dt()),Rt=lt.b.div(It()),Ft={marginRight:"4px"},Ut=lt.b.div(Ct()),Jt=n(164),zt=n(1021),Yt=n(1020),Gt=n(1018),Wt=n(1019),Bt=n(1022),Ht=n(59),Vt=n(1016),qt=n(286),Qt=Wt.a.Item,Xt=Jt.a.Option,Kt=Yt.a.TextArea,Zt=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).submitFn=function(){n.refs.submitRef.buttonNode.click()},n.handleSubmit=function(t){t.preventDefault(),n.props.form.validateFields(function(t,e){t||(console.log("Received values of form: ",e),n.props.addTaskFormSubmitUpdate(e))})},n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.props.addTaskFormFn(this)}},{key:"render",value:function(){var t=this.props.form.getFieldDecorator,e=this.props,n=e.data,a=e.userList,r=e.departmentList,i=e.projectList;a=a.toJS(),r=r.toJS(),i=i.toJS();return o.a.createElement(Wt.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},{onSubmit:this.handleSubmit}),o.a.createElement(Qt,{label:"\u53d1\u5e03\u4eba"},t("publisher_person_pk",{initialValue:n.publisher_person_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0,disabled:!0},a.map(function(t){return o.a.createElement(Xt,{key:t.pk,value:t.pk},t.username)})))),o.a.createElement(Qt,{label:"\u90e8\u95e8"},t("department_pk",{initialValue:n.department_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0,disabled:!0},r.map(function(t){return o.a.createElement(Xt,{key:t.pk,value:t.pk},t.name)})))),o.a.createElement(Qt,{label:"\u5185\u5bb9"},t("task_content",{initialValue:n.task_content,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Kt,{autosize:{minRows:2,maxRows:6}}))),o.a.createElement(Qt,{label:"\u6240\u5c5e\u9879\u76ee"},t("project_pk",{initialValue:n.project_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0},i.map(function(t,e){return o.a.createElement(Xt,{key:t.pk,value:t.pk},t.name)})))),o.a.createElement(Qt,{label:"\u9884\u8ba1\u5b8c\u6210\u65f6\u95f4"},t("estimate_time",{initialValue:n.estimate_time?K()(n.estimate_time):K()(),rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Gt.a,{showTime:!0}))),o.a.createElement(Qt,{label:"\u5b8c\u6210\u4eba"},t("finish_preson_pk",{initialValue:n.finish_preson_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0},a.map(function(t){var e="";return t.department_pk==n.department_pk&&(e=o.a.createElement(Xt,{key:t.pk,value:t.pk},t.username)),e})))),o.a.createElement(Qt,{label:"\u7d27\u6025\u7a0b\u5ea6"},t("urgent_status",{initialValue:n.urgent_status,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0},o.a.createElement(Xt,{key:"1",value:1},"\u7d27\u6025"),o.a.createElement(Xt,{key:"2",value:2},"\u4e00\u822c"),o.a.createElement(Xt,{key:"3",value:3},"\u4e0d\u6025")))),o.a.createElement(Qt,{wrapperCol:{span:12,offset:6},style:{opacity:0}},o.a.createElement(Ht.a,{ref:"submitRef",type:"primary",htmlType:"submit"},"Submit")))}}]),e}(s.PureComponent),$t=Wt.a.create()(Zt),te=Object(v.b)(function(t){return{userList:t.getIn(["home","userList"]),departmentList:t.getIn(["home","departmentList"]),projectList:t.getIn(["home","projectList"])}},function(t){return{}})($t),ee=n(426),ne=n.n(ee),ae=Jt.a.Option,re=zt.a.confirm,ie=Yt.a.TextArea,se=Gt.a.RangePicker,oe=Wt.a.Item,ce=function(t){function e(t){var n;Object(u.a)(this,e),(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).fetchAddTaskItem=function(t){C.getAddTaskItem(t).then(function(t){console.log("\u65b0\u589e\u4e00\u6761\u4efb\u52a1"),console.log(t),0==t.data.code&&n.fetchTaskList()}).catch(function(t){})},n.fetchTaskList=function(){var t=n.state,e=t.searchDepartment,a=t.searchReleaseUser,r=t.searchFinishUser,i=t.searchProject,s=t.searchEstimateTime,o=t.searchFinishTime,c=t.searchVal,l=Object(St.a)({},n.state.getTaskListParams,{searchVal:c}),u=n.state.finishStatus;if(""!==u&&(l.is_finish=u),"all"!=e&&(l.department_pk=e),"all"!=a&&(l.publisher_person_pk=a),"all"!=r&&(l.finish_preson_pk=r),"all"!=i&&(l.project_pk=i),2==s.length){var m=K()(s[0]).format("YYYY-MM-DD")+" 00:00:00",p=K()(s[1]).format("YYYY-MM-DD")+" 23:59:59";l.estimate_start=m,l.estimate_end=p}if(2==o.length){var d=K()(o[0]).format("YYYY-MM-DD")+" 00:00:00",h=K()(o[1]).format("YYYY-MM-DD")+" 23:59:59";l.finishTime_start=d,l.finishTime_end=h}C.getTaskList(l).then(function(t){if(console.log("\u83b7\u53d6\u4efb\u52a1\u5217\u8868"),console.log(t),0==t.data.code){var e=t.data.data,a=D(e,"key","pk");n.collOvertimeTaskData(a),n.setState({taskListData:a})}}).catch(function(t){})},n.fetchUpdateTaskItem=function(t){console.log(t),C.getUpdateTaskItem(t).then(function(t){console.log("\u4fee\u6539\u4efb\u52a1"),console.log(t),0==t.data.code&&n.fetchTaskList()})},n.fetchRemoveTaskItem=function(t){C.getRemoveTaskItem(t).then(function(t){console.log("\u5220\u9664\u4e00\u6761\u4efb\u52a1"),console.log(t),0==t.data.code&&n.fetchTaskList()})},n.formatTaskStatusFn=function(t){var e="";return 0==t?e="\u672a\u5b8c\u6210":1==t?e="\u8fdb\u884c\u4e2d":2==t?e="\u5df2\u5b8c\u6210":3==t&&(e="\u5df2\u5ba1\u6838"),e},n.showTaskClick=function(t,e){n.setState({showTaskModal:!0,showTaskModalData:Object(St.a)({},e)})},n.editTaskClick=function(t,e){var a=I(e);a.publisher_person_pk=parseInt(a.publisher_person_pk)||"",a.finish_preson_pk=parseInt(a.finish_preson_pk)||"",a.urgent_status=parseInt(a.urgent_status)||"",n.setState({addTaskData:a,addTaskModal:!0,taskOperaModel:"update"})},n.resetTaskClick=function(t,e){re({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u91cd\u7f6e\u5b8c\u6210\u72b6\u6001\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",onOk:function(){var t={pk:e.pk,is_finish:0,finish_time:"",finish_leav_msg:"",examine_time:"",examine_leav_msg:""};n.fetchUpdateTaskItem(t)}})},n.startTaskClick=function(t,e,a){re({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u5f00\u59cb\u8be5\u4efb\u52a1\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",onOk:function(){var t={pk:e.pk,is_finish:a};n.fetchUpdateTaskItem(t)}})},n.removeTaskClick=function(t,e){re({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u5220\u9664\u8be5\u6761\u4efb\u52a1 \uff0c\u662f\u5426\u7ee7\u7eed\uff1f",onOk:function(){var t={pk:e.pk};n.fetchRemoveTaskItem(t)},onCancel:function(){}})},n.finishTaskClick=function(t,e,a){var r={content:"\u662f\u5426\u786e\u8ba4\u5b8c\u6210 "+e.publisher_person+" \u53d1\u5e03\u7684 "+e.project_name+" \u9879\u76ee\u7684\u4efb\u52a1",pk:e.pk,is_finish:a,finish_leav_msg:""};n.setState({finishConfirmModel:!0,finishConfirmData:r})},n.finishConfirmModelOk=function(){var t=Object(St.a)({},n.state.finishConfirmData),e={pk:t.pk,is_finish:t.is_finish},a=K()().format("YYYY-MM-DD HH:mm:ss");2==t.is_finish?(e.finish_leav_msg=t.finish_leav_msg,e.finish_time=a):3==t.is_finish&&(e.examine_leav_msg=t.finish_leav_msg,e.examine_time=a),n.fetchUpdateTaskItem(e),n.setState({finishConfirmModel:!1})},n.finishConfirmModelCacel=function(){n.setState({finishConfirmModel:!1})},n.updateFinishLeavMsgVal=function(t){var e=t.target.value,a=Object(St.a)({},n.state.finishConfirmData);a.finish_leav_msg=e,n.setState({finishConfirmData:a})},n.addTaskFormFn=function(t){n.addTaskFormRef=t},n.addTaskOk=function(){n.addTaskFormRef.submitFn()},n.addTaskFormSubmitUpdate=function(t){var e=n.props,a=e.departmentList,r=e.userList,i=e.projectList;a=a.toJS(),r=r.toJS(),i=i.toJS(),t.department=P(a,"pk",t.department_pk).name||"",t.publisher_person=P(r,"pk",t.publisher_person_pk).username||"",t.project_name=P(i,"pk",t.project_pk).name||"",t.finish_preson=P(r,"pk",t.finish_preson_pk).username||"",t.estimate_time=K()(t.estimate_time).format("YYYY-MM-DD HH:mm:ss"),t.pk=n.state.addTaskData.pk,"add"==n.state.taskOperaModel?n.fetchAddTaskItem(t):"update"==n.state.taskOperaModel&&n.fetchUpdateTaskItem(t),n.setState({addTaskModal:!1})},n.collOvertimeTaskData=function(t){var e=[],a=n.props.userInfo.toJS().pk,r=!0,i=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var l=o.value,u=K()(l.estimate_time).format("x"),m=K()().format("x");a==l.finish_preson_pk&&u-m<=108e5&&(0==l.is_finish||1==l.is_finish)&&e.push(l)}}catch(p){i=!0,s=p}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}n.setState({overtimeTaskData:e})},n.closeShowTaskModal=function(){n.setState({showTaskModal:!1})},n.changeSearchDepartment=function(t){var e=n.props,a=e.userList,r=e.projectList;a=a.toJS(),r=r.toJS();var i=n.state,s=i.searchReleaseUser,o=i.searchFinishUser,c=i.searchProject,l=!0,u=!1,m=void 0;try{for(var p,d=a[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var h=p.value;h.pk==s&&h.department_pk!=t&&n.setState({searchReleaseUser:"all"}),h.pk==o&&h.department_pk!=t&&n.setState({searchFinishUser:"all"})}}catch(E){u=!0,m=E}finally{try{l||null==d.return||d.return()}finally{if(u)throw m}}var f=!0,k=!1,g=void 0;try{for(var v,b=r[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var A=v.value;if(A.pk==c&&A.department_pk!=t){n.setState({searchProject:"all"});break}}}catch(E){k=!0,g=E}finally{try{f||null==b.return||b.return()}finally{if(k)throw g}}n.setState({searchDepartment:t},function(){n.fetchTaskList()})},n.changeSearchReleaseUser=function(t){n.setState({searchReleaseUser:t},function(){n.fetchTaskList()})},n.changeSearchFinishUser=function(t){n.setState({searchFinishUser:t},function(){n.fetchTaskList()})},n.changeSearchProject=function(t){n.setState({searchProject:t},function(){n.fetchTaskList()})},n.changeSearchEstimateTime=function(t){n.setState({searchEstimateTime:t},function(){n.fetchTaskList()})},n.changeSearchFinishTime=function(t){n.setState({searchFinishTime:t},function(){n.fetchTaskList()})},n.changeSearchVal=function(t){var e=t.target.value;n.setState({searchVal:e})},n.pressEnterSearchVal=function(t){t.persist(),n.fetchTaskList()},n.exportTaskXlsx=function(){var t=n.props.userInfo;if(t=t.toJS(),0!=n.state.selectedTaskRowKeys.length){var e={exportUser:t.username,data:JSON.stringify(n.state.selectedTaskRowKeys)};console.log(n.state.selectedTaskRowKeys),C.getTaskExportXlsx(e).then(function(t){if(console.log("\u5bfc\u51fa\u6587\u4ef6"),console.log(t),0==t.data.code){var e=document.createElement("a");e.setAttribute("download",""),e.setAttribute("href",x+""+t.data.data),e.click()}}).catch(function(t){console.log(t)})}else Bt.a.warning("\u8bf7\u5148\u9009\u4e2d\u4efb\u52a1\uff01")};var a=n.props.userInfo.toJS();return n.state={columns:[{title:"\u5e8f\u53f7",key:"num",fixed:"left",width:80,render:function(t,e,n){return o.a.createElement("span",{key:n},n+1)}},{title:"\u53d1\u5e03\u4eba",dataIndex:"publisher_person",key:"publisher_person",fixed:"left",width:100},{title:"\u90e8\u95e8",dataIndex:"department",key:"department",width:120},{title:"\u5185\u5bb9",dataIndex:"task_content",key:"task_content"},{title:"\u72b6\u6001",dataIndex:"is_finish",key:"is_finish",width:80,render:function(t,e){return n.formatTaskStatusFn(e.is_finish)}},{title:"\u6240\u5c5e\u9879\u76ee",dataIndex:"project_name",key:"project_name",width:200},{title:"\u65b0\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time",width:200},{title:"\u9884\u8ba1\u5b8c\u6210\u65f6\u95f4",dataIndex:"estimate_time",key:"estimate_time",width:200},{title:"\u5b8c\u6210\u65f6\u95f4",dataIndex:"finish_time",key:"finish_time",width:200},{title:"\u5ba1\u6838\u65f6\u95f4",dataIndex:"examine_time",key:"examine_time",width:200},{title:"\u5b8c\u6210\u4eba",dataIndex:"finish_preson",key:"finish_preson",width:100},{title:"Action",key:"action",render:function(t,e){return o.a.createElement("span",null,0==e.is_finish&&("admin"==a.auth_key&&a.department_pk==e.department_pk||e.finish_preson_pk==a.pk)?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){return n.startTaskClick(t,e,"1")}},"\u5f00\u59cb"):"",1==e.is_finish&&("admin"==a.auth_key&&a.department_pk==e.department_pk||e.finish_preson_pk==a.pk)?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){return n.startTaskClick(t,e,"0")}},"\u505c\u6b62"):"",1==e.is_finish&&("admin"==a.auth_key&&a.department_pk==e.department_pk||e.finish_preson_pk==a.pk)?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){return n.finishTaskClick(t,e,"2")}},"\u5b8c\u6210"):"",2==e.is_finish&&"admin"==a.auth_key&&a.department_pk==e.department_pk?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){return n.finishTaskClick(t,e,"3")}},"\u5ba1\u6838"):"",o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){n.showTaskClick(t,e)}},"\u67e5\u770b"),0==e.is_finish&&("admin"==a.auth_key&&a.department_pk==e.department_pk||e.publisher_person_pk==a.pk)?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){n.editTaskClick(t,e)}},"\u7f16\u8f91"):"",0!=e.is_finish&&("admin"==a.auth_key&&a.department_pk==e.department_pk||e.publisher_person_pk==a.pk)?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"primary",onClick:function(){n.resetTaskClick(t,e)}},"\u91cd\u7f6e"):"",0==e.is_finish&&e.publisher_person_pk==a.pk||"admin"==a.auth_key&&a.department_pk==e.department_pk?o.a.createElement(Ht.a,{style:Ft,size:"small",type:"danger",onClick:function(){n.removeTaskClick(t,e)}},"\u5220\u9664"):"")},fixed:"right",width:240}],finishStatus:"",finishList:[{label:"\u5168\u90e8",value:""},{label:"\u672a\u5b8c\u6210",value:0},{label:"\u5b8c\u6210\u4e2d",value:1},{label:"\u5df2\u5b8c\u6210",value:2},{label:"\u5df2\u5ba1\u6838",value:3}],addTaskModal:!1,taskOperaModel:"",addTaskData:n.initAddTaskData(),taskListData:[],getTaskListParams:{},overtimeTaskData:[],finishConfirmModel:!1,finishConfirmData:{},showTaskModalData:{},showTaskModal:!1,searchDepartment:"all",searchReleaseUser:"all",searchFinishUser:"all",searchProject:"all",searchEstimateTime:[],searchFinishTime:[],searchVal:"",selectedTaskRowKeys:"",contentHeight:""},n.addTaskOk=n.addTaskOk.bind(Object(jt.a)(n)),n.addTaskCancel=n.addTaskCancel.bind(Object(jt.a)(n)),n.showAddModal=n.showAddModal.bind(Object(jt.a)(n)),n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.setState({getTaskListParams:this.props.getTaskListParams},function(){t.fetchTaskList()}),this.setState({contentHeight:ne()(window).height()-150})}},{key:"switFinishStatusFn",value:function(t){var e=this;this.setState({finishStatus:t.value},function(){e.fetchTaskList()})}},{key:"showAddModal",value:function(){this.setState({addTaskData:this.initAddTaskData(),addTaskModal:!0,taskOperaModel:"add"})}},{key:"addTaskCancel",value:function(){this.setState({addTaskModal:!1})}},{key:"initAddTaskData",value:function(){var t=this.props.userInfo.toJS();return{publisher_person_pk:t.pk?parseInt(t.pk):0,department_pk:t.department_pk?parseInt(t.department_pk):"",finish_preson_pk:"",finish_time:"",project_pk:"",task_content:"",estimate_time:"",urgent_status:2}}},{key:"render",value:function(){var t=this,e=this.props,n=e.userInfo,a=e.departmentList,r=e.userList,i=e.taskPageMode,s=e.projectList,c=n.toJS(),l=this.state,u=l.finishList,m=l.taskOperaModel,p=l.taskListData,d=l.overtimeTaskData,h=l.showTaskModalData,f=l.searchDepartment,k=l.searchReleaseUser,g=l.searchFinishUser,v=l.searchProject,b=l.searchVal,A=l.contentHeight,E={onChange:function(e,n){t.setState({selectedTaskRowKeys:n})},onSelect:function(t,e,n){},onSelectAll:function(t,e,n){}};return o.a.createElement(Mt,null,d.length>0?o.a.createElement(Ut,null,o.a.createElement(Vt.a,{autoplay:!0,dots:!1,speed:2e4,autoplaySpeed:1e4,cssEase:"linear",infinite:!0},d.map(function(t){var e=t.task_content;return e.length>30&&(e=e.slice(0,30)+"......"),o.a.createElement("div",{className:"notic-item",key:t.key},t.publisher_person,"  \u53d1\u5e03\u7684 ",e," \u5c06\u4e8e ",t.estimate_time," \u8d85\u65f6")}))):"",o.a.createElement(Nt,null,o.a.createElement("div",{className:"header-item clearfix"},o.a.createElement("div",{className:"btns-wrapper fl"},u.map(function(e,n){return o.a.createElement("div",{className:"btns-item",key:e.value},o.a.createElement(Ht.a,{type:t.state.finishStatus===e.value?"primary":"",size:"small",onClick:function(){return t.switFinishStatusFn(e)}},e.label))})),"all"==i?o.a.createElement("div",{className:"filter-search-wr fl"},o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u90e8\u95e8\uff1a"),o.a.createElement(Jt.a,{size:"small",value:f,onChange:this.changeSearchDepartment,style:{width:"120px"}},o.a.createElement(ae,{key:"\u4e0d\u9650",value:"all"},"\u4e0d\u9650"),a.map(function(t){return o.a.createElement(ae,{key:t.pk,value:t.pk},t.name)}))),o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u53d1\u5e03\u4eba\uff1a"),o.a.createElement(Jt.a,{size:"small",value:k,onChange:this.changeSearchReleaseUser,style:{width:"100px"}},o.a.createElement(ae,{key:"\u4e0d\u9650",value:"all"},"\u4e0d\u9650"),r.map(function(t){var e="";return"all"==f?2==t.auth_pk&&(e=o.a.createElement(ae,{key:t.pk,value:t.pk},t.username)):2==t.auth_pk&&t.department_pk==f&&(e=o.a.createElement(ae,{key:t.pk,value:t.pk},t.username)),e}))),o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u5b8c\u6210\u4eba\uff1a"),o.a.createElement(Jt.a,{size:"small",value:g,onChange:this.changeSearchFinishUser,style:{width:"100px"}},o.a.createElement(ae,{key:"\u4e0d\u9650",value:"all"},"\u4e0d\u9650"),r.map(function(t){var e="";return"all"==f?e=o.a.createElement(ae,{key:t.pk,value:t.pk},t.username):t.department_pk==f&&(e=o.a.createElement(ae,{key:t.pk,value:t.pk},t.username)),e}))),o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u9879\u76ee\uff1a"),o.a.createElement(Jt.a,{size:"small",value:v,onChange:this.changeSearchProject,style:{width:"140px"}},o.a.createElement(ae,{key:"\u4e0d\u9650",value:"all"},"\u4e0d\u9650"),s.map(function(t){var e="";return"all"==f?e=o.a.createElement(ae,{key:t.pk,value:t.pk},t.name):t.department_pk!=f&&t.department_pk||(e=o.a.createElement(ae,{key:t.pk,value:t.pk},t.name)),e})))):"",o.a.createElement("div",{className:"btns-right fr"},"admin"==c.auth_key?o.a.createElement(Ht.a,{className:"btn-item",type:"primary",size:"small",onClick:this.showAddModal},"\u53d1\u5e03\u4efb\u52a1"):"",o.a.createElement(Ht.a,{className:"btn-item",type:"primary",size:"small",onClick:this.exportTaskXlsx},"\u5bfc\u51faxlsx"))),"all"==i?o.a.createElement("div",{className:"header-item"},o.a.createElement("div",{className:"filter-search-wr"},o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u9884\u8ba1\u5b8c\u6210\u65f6\u95f4\uff1a"),o.a.createElement(se,{locale:qt.a,style:{width:"270px"},size:"small",onChange:this.changeSearchEstimateTime})),o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u5b8c\u6210\u65f6\u95f4\uff1a"),o.a.createElement(se,{locale:qt.a,style:{width:"270px"},size:"small",onChange:this.changeSearchFinishTime})),o.a.createElement("div",{className:"search-item"},o.a.createElement("span",{className:"tit"},"\u641c\u7d22\u5185\u5bb9\uff1a"),o.a.createElement(Yt.a,{size:"small",style:{width:"262px"},value:b,onPressEnter:this.pressEnterSearchVal,onChange:this.changeSearchVal})))):""),o.a.createElement(Rt,{className:"all"==i?"act":""},o.a.createElement("div",{className:"main-content-wrapper",style:{height:A+"px"}},o.a.createElement(wt.a,{dataSource:p,columns:this.state.columns,rowSelection:E,scroll:{x:2300,y:1500}}))),o.a.createElement(zt.a,{title:"add"==m?"\u6dfb\u52a0\u4efb\u52a1":"\u7f16\u8f91\u4efb\u52a1",visible:this.state.addTaskModal,width:"60%",maskClosable:!1,onOk:this.addTaskOk,onCancel:this.addTaskCancel},o.a.createElement(te,{addTaskFormFn:this.addTaskFormFn,addTaskFormSubmitUpdate:this.addTaskFormSubmitUpdate,data:this.state.addTaskData})),o.a.createElement(zt.a,{title:"\u63d0\u793a",visible:this.state.finishConfirmModel,onOk:this.finishConfirmModelOk,onCancel:this.finishConfirmModelCacel},o.a.createElement("p",null,this.state.finishConfirmData.content),o.a.createElement("p",{style:{display:3==this.state.finishConfirmData.is_finish&&this.state.finishConfirmData.finish_leav_msg?"block":"none"}},"\u5b8c\u6210\u7559\u8a00\uff1a ",this.state.finishConfirmData.finish_leav_msg),o.a.createElement(ie,{rows:4,value:this.state.finishConfirmData.finish_leav_msg,onChange:this.updateFinishLeavMsgVal})),o.a.createElement(zt.a,{title:"\u67e5\u770b\u4efb\u52a1\u8be6\u60c5",width:"60%",visible:this.state.showTaskModal,onOk:this.closeShowTaskModal,onCancel:this.closeShowTaskModal},o.a.createElement(Wt.a,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},o.a.createElement(oe,{label:"\u53d1\u5e03\u4eba"},o.a.createElement(Yt.a,{value:h.publisher_person})),o.a.createElement(oe,{label:"\u90e8\u95e8"},o.a.createElement(Yt.a,{value:h.department})),o.a.createElement(oe,{label:"\u5185\u5bb9"},o.a.createElement(ie,{value:h.task_content})),o.a.createElement(oe,{label:"\u72b6\u6001"},o.a.createElement(Jt.a,{value:h.urgent_status},o.a.createElement(ae,{key:"1",value:"1"},"\u7d27\u6025"),o.a.createElement(ae,{key:"2",value:"2"},"\u4e00\u822c"),o.a.createElement(ae,{key:"3",value:"3"},"\u4e0d\u6025"))),o.a.createElement(oe,{label:"\u6240\u5c5e\u9879\u76ee"},o.a.createElement(Yt.a,{value:h.project_name})),o.a.createElement(oe,{label:"\u53d1\u5e03\u65f6\u95f4"},o.a.createElement(Yt.a,{value:h.create_time})),o.a.createElement(oe,{label:"\u9884\u8ba1\u5b8c\u6210\u65f6\u95f4"},o.a.createElement(Yt.a,{value:h.estimate_time})),o.a.createElement(oe,{label:"\u5b8c\u6210\u65f6\u95f4"},o.a.createElement(Yt.a,{value:h.finish_time})),o.a.createElement(oe,{label:"\u5ba1\u6838\u65f6\u95f4"},o.a.createElement(Yt.a,{value:h.examine_time})),o.a.createElement(oe,{label:"\u5b8c\u6210\u4eba"},o.a.createElement(Yt.a,{value:h.finish_preson})),o.a.createElement(oe,{label:"\u5b8c\u6210\u4eba\u7559\u8a00"},o.a.createElement(Yt.a,{value:h.finish_leav_msg})),o.a.createElement(oe,{label:"\u5ba1\u6838\u4eba\u7559\u8a00"},o.a.createElement(Yt.a,{value:h.examine_leav_msg})))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n={},a=t.userInfo.toJS();if("all"==e.searchDepartment){var r=a.department_pk?parseInt(a.department_pk):"";n.searchDepartment=r}return n.getTaskListParams=t.getTaskListParams,n}}]),e}(s.PureComponent),le=Object(v.b)(function(t){return{taskListData:t.getIn(["home","taskListData"]),userInfo:t.getIn(["login","userInfo"]),userList:t.getIn(["home","userList"]),departmentList:t.getIn(["home","departmentList"]),projectList:t.getIn(["home","projectList"])}},function(t){return{changeTaskListData:function(){var e=a.changeTaskListData();t(e)}}})(ce),ue=function(t){function e(t){var n;Object(u.a)(this,e);(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).props.userInfo.toJS();return n.state={},n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(xt,null,o.a.createElement(le,{getTaskListParams:{},taskPageMode:"all"}))}}]),e}(s.PureComponent),me=Object(v.b)(function(t){return{taskListData:t.getIn(["home","taskListData"]),userInfo:t.getIn(["login","userInfo"]),userList:t.getIn(["home","userList"]),departmentList:t.getIn(["home","departmentList"]),projectList:t.getIn(["home","projectList"])}},function(t){return{}})(ue);function pe(){var t=Object(ct.a)(["\n\n"]);return pe=function(){return t},t}var de=lt.b.div(pe()),he=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props.userInfo.toJS();return o.a.createElement(de,null,o.a.createElement(le,{getTaskListParams:{finish_preson_pk:t.pk},taskPageMode:"myFinishTask"}))}}]),e}(s.PureComponent),fe=Object(v.b)(function(t){return{userInfo:t.getIn(["login","userInfo"])}},null)(he);function ke(){var t=Object(ct.a)([""]);return ke=function(){return t},t}var ge=lt.b.div(ke()),ve=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props.userInfo.toJS();return o.a.createElement(ge,null,o.a.createElement(le,{getTaskListParams:{publisher_person_pk:t.pk},taskPageMode:"myReleaseTask"}))}}]),e}(s.PureComponent),be=Object(v.b)(function(t){return{userInfo:t.getIn(["login","userInfo"])}},null)(ve);function Ae(){var t=Object(ct.a)(["\n\tposition:absolute;\n\tleft:0;\n\ttop:0;\n\twidth:100%;\n\theight:40px;\n\tz-index:10;\n\t\n\t.btns-right{\n\t\theight:100%;\n\t\tpadding-right:20px;\n\t\tdisplay:flex;\n\t\talign-items:center;\n\t}\n\n"]);return Ae=function(){return t},t}function Ee(){var t=Object(ct.a)(["\n\tposition:relative;\n\tpadding-top:40px;\n\theight:100%;\n\tbox-sizing:border-box;\n"]);return Ee=function(){return t},t}function ye(){var t=Object(ct.a)(["\n\tposition:relative;\n\theight:100%;\n\n"]);return ye=function(){return t},t}var _e=lt.b.div(ye()),je=lt.b.div(Ee()),Te={marginRight:"4px"},Oe=lt.b.div(Ae()),Le=Wt.a.Item,xe=zt.a.confirm,Se=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).fetchAddProject=function(t){C.getAddProject(t).then(function(t){console.log("\u6dfb\u52a0\u9879\u76ee"),console.log(t),0==t.data.code&&n.props.getProjectList()}).catch(function(t){})},n.fetchUpdateProject=function(t){C.getUpdateProject(t).then(function(t){console.log("\u4fee\u6539\u9879\u76ee"),console.log(t),0==t.data.code&&n.props.getProjectList()}).catch(function(t){})},n.updateProjectClick=function(t,e){var a={mode:"update",data:e};n.setState({showAddProjectModal:!0,addProjectModalData:a})},n.removeProjectItem=function(t,e){xe({title:"\u63d0\u793a",content:"\u8be5\u64cd\u4f5c\u5c06\u5220\u9664\u8fd9\u4e2a\u9879\u76ee\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",onOk:function(){var t={pk:e.pk,status:0};n.fetchUpdateProject(t)},onCancel:function(){}})},n.initProjectParams=function(){var t=n.props.userInfo.toJS();return{add_person_name:t.username,add_person_pk:t.pk?parseInt(t.pk):"",department_name:t.department_name,department_pk:t.department_pk?parseInt(t.department_pk):"",name:""}},n.showAddProjectModalFn=function(){var t={mode:"add",data:n.initProjectParams()};n.setState({showAddProjectModal:!0,addProjectModalData:t})},n.addProjectFn=function(){n.refs.submitRef.buttonNode.click()},n.cancelAddProjectFn=function(){n.setState({showAddProjectModal:!1})},n.submitAddProject=function(t){t.preventDefault(),n.props.form.validateFields(function(t,e){if(!t){console.log("Received values of form: ",e);var a=Object(St.a)({},n.state.addProjectModalData.data,e);if("add"==n.state.addProjectModalData.mode)n.fetchAddProject(a);else if("update"==n.state.addProjectModalData.mode){var r={pk:a.pk,name:a.name};n.fetchUpdateProject(r)}n.setState({showAddProjectModal:!1})}})},n.state={columns:[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",render:function(t,e,n){return o.a.createElement("a",{key:n},n+1)}},{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u90e8\u95e8",dataIndex:"department_name",key:"department_name"},{title:"\u65b0\u5efa\u4eba",dataIndex:"add_person_name",key:"add_person_name"},{title:"\u65b0\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"Action",key:"action",render:function(t,e){return o.a.createElement("span",null,o.a.createElement(Ht.a,{style:Te,type:"primary",size:"small",onClick:function(){return n.updateProjectClick(t,e)}},"\u4fee\u6539"),o.a.createElement(Ht.a,{style:Te,type:"danger",size:"small",onClick:function(){return n.removeProjectItem(t,e)}},"\u5220\u9664"))}}],showAddProjectModal:!1,addProjectModalData:{mode:"add",data:{}}},n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props.form.getFieldDecorator,e=this.props.projectList,n=this.state,a=n.columns,r=n.showAddProjectModal,i=n.addProjectModalData;e=e.toJS();return o.a.createElement(_e,null,o.a.createElement(Oe,null,o.a.createElement("div",{className:"btns-right fr"},o.a.createElement(Ht.a,{type:"primary",size:"small",onClick:this.showAddProjectModalFn},"\u6dfb\u52a0"))),o.a.createElement(je,null,o.a.createElement(wt.a,{dataSource:e,columns:a})),o.a.createElement(zt.a,{title:"add"==i.mode?"\u6dfb\u52a0\u9879\u76ee":"\u4fee\u6539\u9879\u76ee",visible:r,onOk:this.addProjectFn,onCancel:this.cancelAddProjectFn},o.a.createElement(Wt.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},{onSubmit:this.submitAddProject}),o.a.createElement(Le,{label:"\u6dfb\u52a0\u4eba"},t("add_person_name",{initialValue:i.data.add_person_name})(o.a.createElement(Yt.a,{disabled:!0}))),o.a.createElement(Le,{label:"\u90e8\u95e8"},t("department_name",{initialValue:i.data.department_name})(o.a.createElement(Yt.a,{disabled:!0}))),o.a.createElement(Le,{label:"\u9879\u76ee\u540d\u79f0"},t("name",{initialValue:i.data.name,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Yt.a,null))),o.a.createElement(Le,{wrapperCol:{span:12,offset:6},style:{opacity:0}},o.a.createElement(Ht.a,{ref:"submitRef",type:"primary",htmlType:"submit"},"Submit")))))}}]),e}(s.Component),we=Wt.a.create()(Se),Ce=Object(v.b)(function(t){return{userInfo:t.getIn(["login","userInfo"]),projectList:t.getIn(["home","projectList"])}},function(t){return{getProjectList:function(){var e=a.getProjectList();t(e)}}})(we);function Ie(){var t=Object(ct.a)([" \n\t\n\theight:40px;\n\tposition:absolute;\n\tleft:0;\n\ttop:0;\n\twidth:100%;\n\tz-index:10;\n\t\n\n\t.nav-box{\n\t\theight:100%;\n\t\tpadding-right:20px;\n\t\tdisplay:flex;\n\t\talign-items:center;\n\t}\n"]);return Ie=function(){return t},t}function De(){var t=Object(ct.a)([" \n\tposition:relative;\n\theight:100%;\n\tpadding-top:40px;\n\tbox-sizing:border-box;\n\n\t.main-content-ins{\n\t\tposition:relative;\n\t\theight:100%;\n\t\toverflow-y:auto;\n\t}\n"]);return De=function(){return t},t}function Pe(){var t=Object(ct.a)(["\n\tposition:relative;\n\theight:100%;\n\tmin-width:1400px;\n"]);return Pe=function(){return t},t}var Me=lt.b.div(Pe()),Ne=lt.b.div(De()),Re=lt.b.div(Ie()),Fe=Jt.a.Option,Ue=Wt.a.Item,Je=zt.a.confirm,ze=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).fetchAddUser=function(t){C.getAddUser(t).then(function(t){console.log("\u6dfb\u52a0\u7528\u6237"),console.log(t),0==t.data.code&&n.props.changeUserList()}).catch(function(t){})},n.fetchRemoveUser=function(t){C.getRemoveUser(t).then(function(t){console.log("\u5220\u9664\u7528\u6237"),console.log(t),0==t.data.code&&n.props.changeUserList()}).catch(function(t){})},n.removeUserItem=function(t,e){Je({title:"\u8be5\u64cd\u4f5c\u5c06\u5220\u9664\u8be5\u7528\u6237\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",content:"Some descriptions",onOk:function(){var t={pk:e.pk};n.fetchRemoveUser(t)},onCancel:function(){}})},n.initUserInfoParams=function(){n.props.userInfo.toJS();return{username:"",password:"",phone:"",department_pk:"",auth_pk:"",ranks_pk:""}},n.submitAddProject=function(t){t.preventDefault(),n.props.form.validateFields(function(t,e){if(!t){console.log("Received values of form: ",e);var a=n.props,r=a.departmentList,i=a.authorityList,s=a.ranksList;r=r.toJS(),i=i.toJS(),s=s.toJS();var o=Object(St.a)({},e);o.auth_key=P(i,"pk",o.auth_pk).name,o.department_name=P(r,"pk",o.department_pk).name,o.ranks_name=P(s,"pk",o.ranks_pk).name,n.fetchAddUser(o),n.setState({isAddShowModel:!1})}})},n.addUserFn=function(){n.refs.submitRef.buttonNode.click()},n.cancelAddUserFn=function(){n.setState({isAddShowModel:!1})},n.openAddUserModal=function(){n.setState({isAddShowModel:!0})},n.state={columns:[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",render:function(t,e,n){return o.a.createElement("span",null,n+1)}},{title:"\u540d\u79f0",dataIndex:"username",key:"username"},{title:"\u90e8\u95e8",dataIndex:"department_name",key:"department_name"},{title:"\u804c\u4f4d",dataIndex:"ranks_name",key:"ranks_name"},{title:"\u6743\u9650",dataIndex:"auth_key",key:"auth_key"},{title:"\u624b\u673a\u53f7",dataIndex:"phone",key:"phone"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"Action",key:"action",render:function(t,e){return o.a.createElement("span",null,o.a.createElement(Ht.a,{type:"danger",size:"small",onClick:function(){return n.removeUserItem(t,e)}},"\u5220\u9664"))}}],isAddShowModel:!1,addModalData:{title:"\u6dfb\u52a0",data:{}}},n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props.form.getFieldDecorator,e=this.props,n=e.userList,a=e.departmentList,r=e.authorityList,i=e.ranksList;n=n.toJS(),a=a.toJS(),r=r.toJS(),i=i.toJS();var s=this.state,c=s.columns,l=s.isAddShowModel,u=s.addModalData;return o.a.createElement(Me,null,o.a.createElement(Re,{className:"clearfix"},o.a.createElement("div",{className:"nav-box rg-nav fr"},o.a.createElement(Ht.a,{type:"primary",size:"small",onClick:this.openAddUserModal}," \u6dfb\u52a0 "))),o.a.createElement(Ne,null,o.a.createElement(wt.a,{dataSource:n,columns:c}),";"),o.a.createElement(zt.a,{title:u.title,visible:l,onOk:this.addUserFn,onCancel:this.cancelAddUserFn},o.a.createElement(Wt.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},{onSubmit:this.submitAddProject}),o.a.createElement(Ue,{label:"\u7528\u6237\u540d"},t("username",{initialValue:u.data.username,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Yt.a,null))),o.a.createElement(Ue,{label:"\u5bc6\u7801"},t("password",{initialValue:u.data.password,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Yt.a,null))),o.a.createElement(Ue,{label:"\u624b\u673a\u53f7"},t("phone",{initialValue:u.data.phone})(o.a.createElement(Yt.a,null))),o.a.createElement(Ue,{label:"\u90e8\u95e8"},t("department_pk",{initialValue:u.data.department_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0},a.map(function(t){return o.a.createElement(Fe,{key:t.pk,value:t.pk},t.name)})))),o.a.createElement(Ue,{label:"\u6743\u9650"},t("auth_pk",{initialValue:u.data.auth_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0},r.map(function(t){return o.a.createElement(Fe,{key:t.pk,value:t.pk},t.name)})))),o.a.createElement(Ue,{label:"\u804c\u4f4d"},t("ranks_pk",{initialValue:u.data.ranks_pk,rules:[{required:!0,message:"\u5fc5\u586b"}]})(o.a.createElement(Jt.a,{defaultActiveFirstOption:!0},i.map(function(t){return o.a.createElement(Fe,{key:t.pk,value:t.pk},t.name)})))),o.a.createElement(Ue,{wrapperCol:{span:12,offset:6},style:{opacity:0}},o.a.createElement(Ht.a,{ref:"submitRef",type:"primary",htmlType:"submit"},"Submit")))))}}]),e}(s.Component),Ye=Wt.a.create()(ze),Ge=Object(v.b)(function(t){return{userList:t.getIn(["home","userList"]),departmentList:t.getIn(["home","departmentList"]),authorityList:t.getIn(["home","authorityList"]),ranksList:t.getIn(["home","ranksList"])}},function(t){return{changeUserList:function(){var e=a.changeUserList();t(e)}}})(Ye);function We(){var t=Object(ct.a)(["\n\t\n\tposition:relative;\n\theight:100%;\n\tpadding-top:40px;\n\tbox-sizing:border-box;\n\n"]);return We=function(){return t},t}function Be(){var t=Object(ct.a)(["\n\t\n\tposition:absolute;\n\tleft:0;\n\ttop:0;\n\twidth:100%;\n\theight:40px;\n\tz-index:10;\t\n\n\t.header-item{\n\t\theight:100%;\n\t\tdisplay:flex;\n\t\talign-items:center;\n\t\tpadding-left:10px;\n\t\tfloat:left;\n\t}\n"]);return Be=function(){return t},t}function He(){var t=Object(ct.a)(["\n\t\n\tposition:relative;\n\theight:100%;\n\n"]);return He=function(){return t},t}var Ve=lt.b.div(He()),qe=lt.b.div(Be()),Qe=lt.b.div(We());function Xe(){var t=Object(ct.a)(["\n\tposition:relative;\n\theight:100%;\n\tpadding-top:40px;\n\tbox-sizing:border-box;\t\n\n\n\t.graphical-wrapper{\n\n\t\t.graphical-item{\n\n\t\t\tfloat:left;\n\t\t\tmargin-right:30px;\n\t\t\tmargin:-top:20px;\n\t\t}\n\t}\n"]);return Xe=function(){return t},t}function Ke(){var t=Object(ct.a)(["\n\t\n\tposition:absolute;\n\tleft:0;\n\ttop:0;\n\twidth:100%;\n\theight:40px;\n\tz-index:10;\t\n\n\t.header-item{\n\t\theight:100%;\n\t\tdisplay:flex;\n\t\talign-items:center;\n\t\tpadding-left:10px;\n\t\tfloat:left;\n\t}\n"]);return Ke=function(){return t},t}function Ze(){var t=Object(ct.a)(["\n\tposition:relative;\n\theight:100%;\t\n"]);return Ze=function(){return t},t}var $e=lt.b.div(Ze()),tn=lt.b.div(Ke()),en=lt.b.div(Xe()),nn=n(284),an=n.n(nn),rn=Jt.a.Option,sn=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).searchQueryFn=function(){n.fetchTaskList()},n.fetchTaskList=function(){var t=n.props,e=t.userPk,a=t.auditTimeRange,r=t.changeTaskList,i=t.changeOnTimeTaskList,s={finish_preson_pk:e};(a=a.toJS())[0]&&a[1]&&(s.create_start=K()(a[0]).format("YYYY-MM-DD HH:mm:ss")||"",s.create_end=K()(a[1]).format("YYYY-MM-DD HH:mm:ss")||""),C.getTaskList(s).then(function(t){if(console.log("\u83b7\u53d6\u4efb\u52a1\u5217\u8868"),console.log(t),0==t.data.code){var e=t.data.data,a=D(e,"key","pk"),s=n.formatTaskData(a),o=n.formatOnTimeTaskData(a);r(s),i(o)}}).catch(function(t){})},n.formatTaskData=function(t){var e=[{status:0,name:"\u672a\u5b8c\u6210"},{status:1,name:"\u5b8c\u6210\u4e2d"},{status:2,name:"\u5df2\u5b8c\u6210"},{status:3,name:"\u5df2\u5ba1\u6838"}],n=M(e,"name"),a=N(t,e);return{legendData:n,selected:R(a),seriesData:a}},n.formatOnTimeTaskData=function(t){var e=I(t),n=["\u6309\u65f6\u5b8c\u6210","\u672a\u6309\u65f6\u5b8c\u6210"],a=[];n.forEach(function(t){var e={name:t,value:0};a.push(e)});var r=!0,i=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var l=o.value,u=K()(l.estimate_time).format("x")||"",m=K()(l.finish_time).format("x")||"";2!=l.is_finish&&3!=l.is_finish||(m>u?a[1].value+=1:a[0].value+=1)}}catch(p){i=!0,s=p}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}return{legendData:n,selected:R(a),seriesData:a}},n.getFinishStatausOtion=function(t){return{title:{text:"\u4efb\u52a1\u72b6\u6001\u7edf\u8ba1",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:t.legendData,selected:t.selected},series:[{name:"\u5b8c\u6210\u72b6\u6001",type:"pie",radius:"55%",center:["40%","50%"],data:t.seriesData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},n.getIsFinishStatausOtion=function(t){return{title:{text:"\u4efb\u52a1\u662f\u5426\u6309\u65f6\u5b8c\u6210\u7edf\u8ba1",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:t.legendData,selected:t.selected},series:[{name:"\u6309\u65f6\u5b8c\u6210",type:"pie",radius:"55%",center:["40%","50%"],data:t.seriesData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},n.state={},n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.props.personWorkStatComRef(this)}},{key:"render",value:function(){var t=this.props,e=t.userList,n=t.userPk,a=t.changeUserPk,r=t.statCircleData,i=t.onTimeTaskData;return e=e.toJS(),r=r.toJS(),i=i.toJS(),o.a.createElement($e,{className:"person-work-stat-com"},o.a.createElement(tn,{className:"clearfix"},o.a.createElement("div",{className:"header-item"},o.a.createElement("span",null,"\u5b8c\u6210\u4eba\uff1a"),o.a.createElement("span",null,o.a.createElement(Jt.a,{size:"small",style:{width:"160px"},value:n,onChange:a},e.map(function(t){return o.a.createElement(rn,{key:t.pk,value:t.pk},t.username)}))))),o.a.createElement(en,null,o.a.createElement("div",{className:"graphical-wrapper clearfix"},o.a.createElement("div",{className:"graphical-item"},o.a.createElement(an.a,{option:this.getFinishStatausOtion(r),style:{height:"350px",width:"500px"},className:"react_for_echarts"})),o.a.createElement("div",{className:"graphical-item"},o.a.createElement(an.a,{option:this.getIsFinishStatausOtion(i),style:{height:"350px",width:"500px"},className:"react_for_echarts"})))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.userInfo.toJS(),a=t.userPk,r=t.changeUserPk;return n.username&&!a&&r(n.pk),null}}]),e}(s.Component),on=Object(v.b)(function(t){return{userList:t.getIn(["home","userList"]),userPk:t.getIn(["statPersonWorkCom","userPk"]),statCircleData:t.getIn(["statPersonWorkCom","statCircleData"]),onTimeTaskData:t.getIn(["statPersonWorkCom","onTimeTaskData"])}},function(t){return{changeUserPk:function(e){var n=i.changeUserPk(e);t(n)},changeTaskList:function(e){var n=i.changeTaskList(e);t(n)},changeOnTimeTaskList:function(e){var n=i.changeOnTimeTaskList(e);t(n)}}})(sn),cn=Gt.a.RangePicker,ln=Jt.a.Option,un=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(r)))).searchQueryFn=function(){1==n.props.statMode&&n.personWorkStatComRef.searchQueryFn()},n.personWorkStatComRef=function(t){n.personWorkStatComRef=t},n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this.props,e=t.statModeData,n=t.statMode,a=t.auditTimeRange;e=e.toJS(),a=a.toJS();var r=this.props,i=r.changeStatMode,s=r.changeAuditTimeRange;return o.a.createElement(Ve,{className:"statistice-page-wrapper"},o.a.createElement(qe,{className:"clearfix"},o.a.createElement("div",{className:"header-item"},o.a.createElement("span",null,"\u65f6\u95f4\u8303\u56f4\uff1a"),o.a.createElement("span",null,o.a.createElement(cn,{size:"small",value:a,onChange:s}))),o.a.createElement("div",{className:"header-item"},o.a.createElement("span",null,"\u6a21\u5f0f\uff1a"),o.a.createElement("span",null,o.a.createElement(Jt.a,{size:"small",style:{width:"160px"},value:n,onChange:i},e.map(function(t){return o.a.createElement(ln,{key:t.value,value:t.value},t.name)})))),o.a.createElement("div",{className:"header-item"},o.a.createElement(Ht.a,{type:"primary",size:"small",onClick:this.searchQueryFn},"\u67e5\u8be2"))),o.a.createElement(Qe,null,o.a.createElement(on,Object.assign({personWorkStatComRef:this.personWorkStatComRef},this.props,{style:1==n?{display:"block"}:{}}))))}}]),e}(s.Component),mn=Object(v.b)(function(t){return{userInfo:t.getIn(["login","userInfo"]),statModeData:t.getIn(["statPage","statModeData"]),statMode:t.getIn(["statPage","statMode"]),auditTimeRange:t.getIn(["statPage","auditTimeRange"])}},function(t){return{changeStatMode:function(e){var n=r.changeStatMode(e);t(n)},changeAuditTimeRange:function(e){var n=r.changeAuditTimeRange(e);t(n)}}})(un),pn=function(t){function e(t){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).call(this,t))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return o.a.createElement(bt,null,o.a.createElement(f.HashRouter,{className:""},o.a.createElement(g.CacheSwitch,{className:"router-wrapper-switch"},o.a.createElement(g.CacheRoute,{path:"/home/myTaskList",component:fe}),o.a.createElement(g.CacheRoute,{path:"/home/myReleaseTaskList",component:be}),o.a.createElement(g.CacheRoute,{path:"/home/taskList",component:me}),o.a.createElement(g.CacheRoute,{path:"/home/projectPage",component:Ce}),o.a.createElement(g.CacheRoute,{path:"/home/userManPage",component:Ge,className:"router-wrapper-route"}),o.a.createElement(g.CacheRoute,{path:"/home/statisticsPage",component:mn,className:"router-wrapper-route"}),o.a.createElement(k.c,{from:"/home",to:"/home/taskList"}))))}}]),e}(s.PureComponent),dn=function(t){function e(t){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).call(this,t))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.props.changeTaskListData(),this.props.changeUserList(),this.props.getDepartmentList(),this.props.getProjectList(),this.props.getAuthorityList(),this.props.getRanksList()}},{key:"render",value:function(){return o.a.createElement(kt,null,o.a.createElement(Ot,{history:this.props.history}),o.a.createElement("div",{className:"bot-info-wrapper"},o.a.createElement(_t,null),o.a.createElement(pn,null)))}}]),e}(s.PureComponent),hn=Object(v.b)(function(t){return{}},function(t){return{changeTaskListData:function(){var e=a.changeTaskListData();t(e)},changeUserList:function(){var e=a.changeUserList();t(e)},getDepartmentList:function(){var e=a.getDepartmentList();t(e)},getProjectList:function(){var e=a.getProjectList();t(e)},getAuthorityList:function(){var e=a.getAuthorityList();t(e)},getRanksList:function(){var e=a.getRanksList();t(e)}}})(dn),fn=n(432),kn=n.n(fn);function gn(){var t=Object(ct.a)(["\n\n    position: relative;\n    height: 100%;\n    background:url(",") left top no-repeat;\n    background-size:100%;\n    overflow:hidden;\n\n\t.login{\n\t\twidth: 395px;\n\t\t height: 370px;\n\t\t position: relative;\n\t\t margin-top: -200px;\n\t\t margin-left: -185px;\n\t\t left: 50%;\n\t\t top: 50%;\n\t\t background:#FFFFFF;\n\t\t border-radius: 5px;\n\t\t padding: 20px;\n\n\t\t h1{\n\t\t \ttext-align: center;\n\t\t \tfont-size: 30px;\n\t\t \tmargin-bottom: 30px;\n\t\t \tpadding-bottom: 10px;\n\t\t \tborder-bottom: 1px solid #ddd;\n\t\t \tcolor: #333;\n\t\t }\n\t\t .line{\n\t\t \theight: 40px;\n\t\t   border: 1px solid #ddd;\n\t\t   position: relative;\n\t\t }\n\n\t\t  .line span{\n\t\t  \tposition: absolute;\n\t\t  \tdisplay: inline-block;\n\t\t  \tleft:5px;\n\t\t  \ttop: 5px;\n\t\t  \tcolor: #aca2a2;\n\t\t  \theight:26px;\n\t\t  \tfont-size: 24px;\n\t\t  }\n\t\t  .line input{\n\t\t  \toutline: none;\n\t\t  \twidth: 86%;\n\t\t  \theight: 35px;\n\t\t  \tline-height: 35px;\n\t\t    border: none;\n\t\t    background: none;\n\t\t    font-size: 16px;\n\t\t    margin-left: 38px;\n\t\t    color: #333;\n\t\t    user-select: none;\n\t\t\t-moz-user-select: none;\n\t\t\t-webkit-user-select: none;\n\t\t\t-ms-user-select: none;\n\t\t  }\n\t\t  .line_top{\n\t\t  \tmargin-top: 20px;\n\t\t  \tfont-size: 14px;\n\t\t  \toverflow: hidden;\n\t\t  }\n\t\t  .line_top label{\n\t\t    line-height: 12px;\n\t\t    margin-left: 5px;\n\t\t  }\n\t\t  .btn{\n\t\t  \tmargin-top: 30px;\n\t\t  \ttext-align: center;\n\t\t  \t\n\t\t  }\n\t\t  .btn button{\n\t\t  \twidth: 210px;\n\t\t  \theight: 40px;\n\t\t  \tline-height: 40px;\n\t\t  \ttext-align: center;\n\t\t  \tcolor: #fff;\n\t\t  \tbackground: #027cad;\n\t\t  \tborder: none;\n\t\t  \tmargin: 0px auto;\n\t\t  \tborder-radius: 5px;\n\t\t  \tcursor: pointer;\n\t\t  \tfont-size: 18px;\n\t\t  }\n\t\t.btn button:hover{\n\t\t\tbackground: #1092c7;\n\t\t}\n\t\t.tips{\n\t\t\tcolor: red;\n\t\t\theight:25px;\n\t\t\tline-height: 25px;\n\t\t\tfont-size: 12px;\n\t\t\t\n\t\t}\n\t}\n\t\n"]);return gn=function(){return t},t}var vn=lt.b.div(gn(),kn.a),bn=n(139),An=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(p.a)(this,Object(d.a)(e).call(this,t))).state={username:"",password:"",rememberPwd:!0},n.loginFn=n.loginFn.bind(Object(jt.a)(n)),n.changeUsername=n.changeUsername.bind(Object(jt.a)(n)),n.changePassword=n.changePassword.bind(Object(jt.a)(n)),n.changeRemember=n.changeRemember.bind(Object(jt.a)(n)),n}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.initUsernamePwd()}},{key:"initUsernamePwd",value:function(){var t=B.a.get("jasonWorkMan");t&&this.setState(function(e,n){return{username:t.username,password:t.password}})}},{key:"loginFn",value:function(){var t=this;if(this.state.rememberPwd){var e={username:this.state.username,password:this.state.password};B.a.set("jasonWorkMan",e)}else B.a.remove("jasonWorkMan");var n={username:this.state.username,password:this.state.password};C.getLogin(n).then(function(e){if(console.log("\u767b\u5f55"),console.log(e),0==e.data.code)if(e.data.data.pk>0){console.log("\u767b\u5f55\u6210\u529f");var n=e.data.data;t.props.changeUserInfo(n),t.props.history.push("/home")}else alert("\u767b\u5f55\u5931\u8d25")}).catch(function(t){console.log(t)})}},{key:"changeUsername",value:function(t){t.persist(),this.setState({username:t.target.value})}},{key:"changePassword",value:function(t){t.persist(),this.setState({password:t.target.value})}},{key:"changeRemember",value:function(t){var e=t.target.checked;this.setState({rememberPwd:e})}},{key:"render",value:function(){return o.a.createElement(vn,{imgUrl:"../../assets/images/bg.png"},o.a.createElement("div",{className:"login"},o.a.createElement("h1",null,"\u767b\xa0\xa0\xa0\xa0\u5f55"),o.a.createElement("div",{className:"line lineName"},o.a.createElement("span",{className:"iconfont icon-user"},"\ue726"),o.a.createElement("input",{type:"",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",defaultValue:this.state.username,onChange:this.changeUsername})),o.a.createElement("div",{className:"nameT tips"}),o.a.createElement("div",{className:"line linePsd"},o.a.createElement("span",{className:"iconfont iconpassword"},"\ue82b"),o.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",defaultValue:this.state.password,onChange:this.changePassword})),o.a.createElement("div",{className:"psdT tips"}),o.a.createElement("div",{className:"line_top"},o.a.createElement(bn.a,{className:"f_l",checked:this.state.rememberPwd,onChange:this.changeRemember},"\u8bb0\u4f4f\u5bc6\u7801")),o.a.createElement("div",{className:"btn"},o.a.createElement("button",{onClick:this.loginFn},"\u767b\xa0\xa0\xa0\xa0\u5f55"))))}}]),e}(s.PureComponent),En=Object(v.b)(function(t){return{}},function(t){return{changeUserInfo:function(e){t(function(t){return{type:"login/USER_INFO",userInfo:Object(y.fromJS)(t)}}(e))}}})(An),yn=(n(1013),function(t){function e(t){return Object(u.a)(this,e),Object(p.a)(this,Object(d.a)(e).call(this,t))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(v.a,{store:ot},o.a.createElement(f.HashRouter,null,o.a.createElement(g.CacheSwitch,null,o.a.createElement(g.CacheRoute,{className:"home-cache-route-page",path:"/home",render:function(t){return ot.getState().toJS().login.userInfo.username?o.a.createElement(hn,t):o.a.createElement(k.c,{to:"/login"})}}),o.a.createElement(k.d,{path:"/login",exact:!0,component:En}),o.a.createElement(k.c,{from:"/",to:"/login"})),"_"))}}]),e}(s.Component));function _n(){var t=Object(ct.a)(["\n\n\thtml, body, div, span, applet, object, iframe,\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\n\ta, abbr, acronym, address, big, cite, code,\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\n\tsmall, strike, strong, sub, sup, tt, var,\n\tb, u, i, center,\n\tdl, dt, dd, ol, ul, li,\n\tfieldset, form, label, legend,\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\n\tarticle, aside, canvas, details, embed, \n\tfigure, figcaption, footer, header, hgroup, \n\tmenu, nav, output, ruby, section, summary,\n\ttime, mark, audio, video {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tborder: 0;\n\t\tfont-size: 100%;\n\t\tfont: inherit;\n\t\tvertical-align: baseline;\n\t}\n\n\t/* HTML5 display-role reset for older browsers */\n\tarticle, aside, details, figcaption, figure, \n\tfooter, header, hgroup, menu, nav, section {\n\t\tdisplay: block;\n\t}\n\tbody {\n\t\tline-height: 1;\n\t}\n\tol, ul {\n\t\tlist-style: none;\n\t}\n\tblockquote, q {\n\t\tquotes: none;\n\t}\n\tblockquote:before, blockquote:after,\n\tq:before, q:after {\n\t\tcontent: '';\n\t\tcontent: none;\n\t}\n\ttable {\n\t\tborder-collapse: collapse;\n\t\tborder-spacing: 0;\n\t}\n\n\n\t@font-face {\n\t    font-family: \"iconfont\";\n\t    src: url('./iconfont.eot?t=1528610804703'); /* IE9*/\n\t    src: url('./iconfont.eot?t=1528610804703#iefix') format('embedded-opentype'), /* IE6-IE8 */\n\t    url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAawAAsAAAAACXQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7ko/Y21hcAAAAYAAAAB+AAABwJ8cCDpnbHlmAAACAAAAApEAAAL0URYALWhlYWQAAASUAAAALwAAADYRpQXlaGhlYQAABMQAAAAcAAAAJAfeA4dobXR4AAAE4AAAABMAAAAYF+kAAGxvY2EAAAT0AAAADgAAAA4C3AHkbWF4cAAABQQAAAAfAAAAIAEVAF1uYW1lAAAFJAAAAUUAAAJtPlT+fXBvc3QAAAZsAAAAQgAAAFNcaMVWeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/sM4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLwIZG7438AQw9zA0AAUZgTJAQAq0wzDeJzFkTEKwzAMRZ9itxSTMblF5xygc5ZcpFMHn1jkFumXHQo9Qb54RvrIyFjADUjiKTLYByP0lmvNT5TmZ16qCw8GRfXZl307DnnVp1/eZeorjIrIk6Zk3cHuXCa7bvS/xnauZxX/X0/0RJ86sROfO9HjSyd2tG8dhi8XIxfqAAB4nDWSz2sTQRTH581kdtM02W33Z7L5nW12G1s3cbObiNpsChX8hRUEsQ0oCnqoKBYLvShEJBDFg2CPglAEr73UUy0ttP9ATz14sCiCx148tVs3aTszvOF934PPvPcGUYSO9sgaiSMRjaJzaArdQgiYMShwOA1507HwGMh5KqsSR0zdzLN6wSIToBYYSbFrjqEyLMMDBxmo5u2aaWETXKeBL4KtpAESSe22UEwJ5ANE4mam41/DyyBn9RTfOOtfHfckOyeGF6OCkBCE92GG0jDGIZ6Dp6oyQAcijP+F8pq8li3hLEQTpnZjJpZLCg+6zrN0UR0AaLdBTOa4r96wNhycl5oiCgl2KBaOazF9RILF34NxMZo2fqFg4aDWNgk2GkL5oEo2AzIHrMuqbgPqjlHuu5Ki1i3oKTI+mLUqZLXbbq8f0qmDvm0eS/j7rLUw2V0lzXa7SQ/XW8tvTu7maaDP2yQbZBLJPR6FBrgWmFwPrNq1OvQaGIj1wA1EC8g3f98oka2lpa1QaGvJm7eAj2jSwXJopdNZIaRnWeCt595xwsdtcsbw9yOSBv86K6HTrF6toYB9FLARYhGPRlAZoXx/elAViWHqDEtorWqnQXd1Ri8YruOBoxfY4CGypFTt2gTgjcdX/N3Lj4B/OPWEMpiyc7Bbabw4D/lJqz53r3mhfH80ndOKlZ0dgvwSeEOGLvqbNLWwXa5VSne46PXiXZpKyCm7mDnp/2syQ14hDhkIeQAeXALdNBiZB1AZHjPBDESjHugNrGSDP8X6n4EkXHgL2MX+n59R+Uc4ZYdxAkchSZ3BnDkqdIuKHJuHjfEW4GkAaIX8+Dsp8gmz6VQYoqoEfyMtIT7IRG6q0wH3P3/XmCcAAAB4nGNgZGBgAOKzF3Kd4/ltvjJwszCAwHWnB18Q9P8GFgbmBiCXg4EJJAoAVtsL6AB4nGNgZGBgbvjfwBDDwgACQJKRARWwAQBHDAJveJxjYWBgYH7JwMDCgIoBEp8BAQAAAAAAAHYArgDsATYBegAAeJxjYGRgYGBjCGRgZQABJiDmAkIGhv9gPgMAEUgBcwB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxjYGKAAC4G7ICNkYmRmZGFkZWRjZGdgbGCpbggM48rLTEvPSUxKzMvnckxkSczOT9PNzkjNTk7M4+BAQDkRwvZAAA=') format('woff'),\n\t    url('./iconfont.ttf?t=1528610804703') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/\n\t    url('./iconfont.svg?t=1528610804703#iconfont') format('svg'); /* iOS 4.1- */\n\t  }\n\n\t  .iconfont {\n\t    font-family:\"iconfont\" !important;\n\t    font-size:16px;\n\t    font-style:normal;\n\t    -webkit-font-smoothing: antialiased;\n\t    -moz-osx-font-smoothing: grayscale;\n\t  };\n\n\t  html,body{\n\t  \twidth:100%;\n\t  \theight:100%;\n\t  \toverflow:hidden;\n\t  }\n\n\t  #root{\n\t  \twidth:100%;\n\t  \theight:100%;\n\t  \toverflow:hidden;\n\t  }\n\n\t  .fl{\n\t  \tfloat:left;\n\t  }\n\t  .fr{\n\t  \tfloat:right;\n\t  }\n\n\t  .clearfix{\n\t  \tzoom:1;\n\t  }\n\n\t  .clerfix:after{\n\t  \tcontent:\" \";\n\t  \tdisplay:block;\n\t  \theight:0;\n\t  \tclear:both;\n\n\t  }\n\n"]);return _n=function(){return t},t}var jn=Object(lt.a)(_n());n(1014);l.a.render(o.a.createElement(s.Fragment,null,o.a.createElement(yn,null),o.a.createElement(jn,null)),document.getElementById("root"))},167:function(t,e){},168:function(t,e){},432:function(t,e,n){t.exports=n.p+"static/media/bg.73d14ac1.png"},436:function(t,e,n){t.exports=n(1015)}},[[436,1,2]]]);
//# sourceMappingURL=main.fd1fc543.chunk.js.map